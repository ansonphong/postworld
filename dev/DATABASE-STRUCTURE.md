Postworld Database Structure
======

## Post Meta
__Default Table Name:__ *wp_posworld_* __post_meta__

### Columns

#### __post_id__ : *integer*

#### __post_class__ : *string*
- Used by pw_query posts by __class__
- Examples of classes:
  - __editorial__ - On posts from approved authors and editors
  - __community__ - On posts from community members

#### __post_format__ : *string*
__Default__: *standard*

- Used by pw_query media by __format__
- Used with _ng-switch_ on templates to change how post of various formats are displayed
- Examples of formats:
  - __standard__ - A regular post
  - __video__ - On posts which have a primary _link_url_ which is a video
  - __audio__ - On posts which have a primary _link_url_ which is a audio

#### __link_url__ : *string*
- Used to associate a specific link URL with a post
- Used by templates for featured links, videos and audio files for embedding

#### __post_points__ : *integer*
- The total number of points voted to a post

#### __rank_score__ : *integer*
- The real-time rank-score of a post, based on `calculate_rank_score()` Method

------

## User Meta
__Default Table Name:__ *wp_posworld_* __user_meta__

### Columns

#### __user_id__ : *integer*
- Wordpress User ID

#### __post_points__ : *integer* (cached)
- Total points which have been voted to the user's posts

#### __post_points_meta__ : *integer* (cached)
- Cached data which breaks down the attribution of points by post_type

__Anatomy:__

``` javascript
{
	post_type : {
		post : 242,
		link : 523,
		blog : 123,
		event : 12
	}
}
```

#### __comment_points__ : *integer* (cached)
- Total points which have been voted to the user's comments

#### __share_points__ : *integer* (cached)
- Total number of share points of the user's shares (my_shares + my_post_shares)

#### __share_points_meta__ : *JSON* (cached)
- Cached JSON Object which breaks down the user's share points by:
  - __my_shares__ : From posts that I have shared
  - __my_post_shares__ : Number of share points to my posts

- Generated by : `user_share_report($used_id)`
- Cached by : `cache_user_share_report($used_id)`

__Anatomy:__

``` javascript
{
	overview : {
		my_shares : 312,
		my_post_shares : 512
	},
	details : {
		my_shares : {
			{
				post_id : 8723,	// post_id
				shares : 385,	// shares
				last_time : 	// UNIX Timestamp of the last share
			},
			{
				post_id : 3498,
				shares : 551,
				last_time :
			},
			...
		}
		my_post_shares : { // others who have shared my posts
			{
				post_id : 9348,
				shares : 385,
				users_shares:{ 
					{
						user_id : 843,
						shares : 235,
						last_time : 
					},
					{
						user_id : 843,
						shares : 984,
						last_time : 
					},
					...
				}
			},
			{
				post_id : 1252, // post_id
				shares : 385, // shares
				users_shares:{ 
					{
						user_id : 2352,
						shares : 456,
						last_time : 
					},
					{
						user_id : 2632,
						shares : 234,
						last_time : 
					},
					...
				}
			},
		}
	}

}
```

#### __post_relationships__ : *JSON*
- Outlines the user's relationships to posts, in terms of votes that they have vast

- __viewed__ : Used to generate a report of which content the user has viewed

- __has_voted.recent__ : Used to calculate how often a user is commenting on the post
  - If the user is voting on comments too often, disable comment voting temporarily

__Anatomy:__

``` javascript
{
	viewed:[12,25,23,16,47,24,58,112,462,78,234,25,128],
	favorites:[12,16,25],
	read_later:[58,78],
	has_voted:{
		recent : { 
			{
				post_id:242,
				points:1,
				time_voted:{{UNIX TIMESTAMP}}
			},
			{
				post_id:942,
				points:-1,
				time_voted:{{UNIX TIMESTAMP}}
			},
		}
	}
}
```

#### __comment_relationships__ : *JSON*
- Outlines the user's relationships to comments, in terms of votes that they have vast

- __has_voted.recent__ : Used to calculate how often a user is commenting on the post
  - If the user is voting on comments too often, disable comment voting temporarily

__Anatomy:__

``` javascript
{
	has_voted:{
		recent : {
			{
				comment_id:24152,
				points:1,
				time_voted:{{UNIX TIMESTAMP}}
			},
			{
				comment_id:43532,
				points:-1,
				time_voted:{{UNIX TIMESTAMP}}
			},
		}
	}
}
```

#### __location_city__ : *string*
- Used to display and query a user by city

#### __location_region__ : *string*
- Used to display and query a user by region (province/state/territory)

#### __location_country__ : *string*
- Used to display and query a user by country

------

## Comment Meta
__Default Table Name:__ *wp_posworld_* __comment_meta__

- Used to cache data for comments

### Columns

#### __comment_id__ : *integer*

#### __post_id__ : *integer*

#### __comment_points__ : *integer*

------

## Post Points
__Default Table Name:__ *wp_posworld_* __post_points__

- Used to store a record of all points cast to all posts

### Columns

#### __post_id__ : *integer*
- The post ID of the post being voted on

#### __author_id__ : *integer*
- The user ID of the author who created the post

#### __user_id__ : *integer*
- The used ID of the user who is casting a vote

#### __post_points__ : *integer*
- The number of points cast in the vote

#### __time__ : *integer*
- The time which the vote was cast

------

## Comment Points
__Default Table Name:__ *wp_posworld_* __comment_points__

- Used to store a record of all points cast to all comments

### Columns

#### __comment_post_id__ : *integer*
- The ID of the post that the comment is on

#### __post_author_id__ : *integer*
- The user ID of the author who created the post which the comment is on

#### __comment_id__ : *integer*
- The ID of the comment

#### __comment_author_id__ : *integer*
- The used ID of the author of the comment

#### __user_id__ : *integer*
- The ID of the user who is casting the vote

#### __comment_points__ : *integer*
- The number of points being voted to the comment

#### __time__ : *integer*
- The time that the vote was cast
